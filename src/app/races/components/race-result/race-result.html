<div class="container">
  @if (race) {
    <div class="page-header">
      <app-go-back-button></app-go-back-button>
      <h1 class="page-title">{{ race.gpName }} - {{ season }}</h1>
    </div>
  }

  <app-race-summary
    [winner]="winner"
    [poleman]="pole"
    [fastestLap]="fastestLap">
  </app-race-summary>

  <div class="race-links">
    <div class="session-selector-container">
      <label for="session-select" class="selector-label">Session :</label>
      <div class="select-wrapper">
        <select
          id="session-select"
          class="custom-select"
          [ngModel]="sessionCode"
          (ngModelChange)="onSessionChange($event)">
          @for (s of sessions; track s) {
            <option [value]="sessionMapping[s]">{{ s }}</option>
          }
        </select>
        <div class="select-arrow"></div>
      </div>
    </div>

    <div class="race-program">
      @if (race) {
        <a [routerLink]="['/races', getSeason(), slugify(race.gpName), 'details']"
           [state]="{ round: race.round, race: race.gpName }"
           class="btn-program">
          <i class="fa-solid fa-calendar-days"></i>
          <span>Voir le Programme</span>
        </a>
      }
    </div>
  </div>

  <div class="result-area">
    @if (isLoading) {
      <div class="loading-wrapper">
        <div class="spinner"></div>
      </div>
    } @else {
      <app-session-result-table
        [sessionCode]="sessionCode"
        [results]="raceList">
      </app-session-result-table>
    }
  </div>
</div>
