<div class="table-container">
  <table class="table-common" [ngClass]="tableType + '-table'">
    <thead>
    <tr>
      @for (col of columns; track col) {
        <th>{{ col }}</th>
      }
    </tr>
    </thead>
    <tbody>
      @for (row of data; track $index) {
        <tr>
          @if (columns.includes('Pos.')) {
            <td>{{ row.position }}</td>
          }

          @if (columns.includes('Pilote')) {
            <td class="driver-cell" [ngClass]="row.constructorId">
              <span class="fi fi-{{ getDriverFlag(row.nationality) }} flag-icon"></span>

              <span class="driver-full">{{ row.fullName }}</span>

              <span class="driver-short">{{ row.familyName || getLastName(row.fullName) }}</span>
            </td>
          }

          @if (columns.includes('Écurie')) {
            <td class="team-cell" [ngClass]="row.Team.constructorId">
              <div class="team-wrapper">
                @if (tableType === 'teams') {
                  <img src="/logos/{{ row.Team.constructorId }}.avif" class="team-logo">
                  <span class="team-name">{{ row.Team.constructorName }}</span>
                } @else {
                  <img src="/logos/{{ row.constructorId }}.avif" class="team-logo">
                  <span class="team-name">{{ row.team }}</span>
                }
              </div>
            </td>
          }

          @if (columns.includes('Points')) {
            <td>
              <span class="points-wrapper">
                {{ +row.points }}
                @if (row.points_diff > 0) {
                  <span id="diff-points"> -{{ +row.points_diff }} </span>
                }
              </span>
            </td>
          }

          @if (columns.includes('Évo.')){
            <td class="standing_evo">
              @if (row.evolution > 0){
                <span class="evo-positive">
                  ▲ {{ row.evolution }}
                </span>
              } @else if (row.evolution < 0){
                <span class="evo-negative">
                  ▼ {{ Math.abs(row.evolution) }}
                </span>
              } @else if (row.evolution === 0){
                <span class="evo-null">
                  -
                </span>
              }
            </td>
          }
        </tr>
      }
    </tbody>
  </table>
</div>

